set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'atbraz/ghostty-theme-sync-tmux'
set -g @ghostty-sync-auto-reload "on"
set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.config/tmux/plugins/'

# Key bindings and core behavior
# unbind C-b
# set -g prefix C-Space
# bind C-Space send-prefix

bind r source-file ~/.config/tmux/tmux.conf

bind -n M-l send-keys 'C-l'

# Path-related window/pane bindings
bind c new-window      -c '#{pane_current_path}'
bind % split-window -h -c '#{pane_current_path}'
bind '"' split-window -v -c '#{pane_current_path}'

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# Core UI settings
set -g mouse on
setw -g mode-keys vi

# Terminal and color settings
set -g default-terminal "tmux-256color"
set-option -a terminal-features 'xterm-256color:RGB'

# Enable bracketed paste mode for proper clipboard pasting
set -g set-clipboard on

#################################################################################
# Configuration Loading Order
#################################################################################
# Unix philosophy: Each file does one thing well
# - reset.conf: Unsets color variables only
# - themes/*.tmux.conf: Sets ONLY color variables (@text_*, @border_*, @bg_*)
# - components/*.tmux.conf: Defines structure/layout using color variables
#
# This separation enables:
# - Hot-swapping themes without changing layout
# - Dynamic color updates from plugins
# - Testing themes independently
# - Transparent terminal backgrounds (all use bg=default)
#################################################################################

# 1. Reset theme variables (prepare clean slate)
source ~/.config/tmux/reset.conf

# 2. Load theme colors
# Option A: Static theme file (manual theme selection)
# source ~/.config/tmux/themes/monokai-pro-machine.tmux.conf
# source ~/.config/tmux/themes/default.tmux.conf
# source ~/.config/tmux/themes/nord.tmux.conf

# Option B: Dynamic theme sync from Ghostty (recommended)
# The plugin will automatically inject colors from your active Ghostty theme
# Uncomment the line below to enable:
run-shell ~/.config/tmux/plugins/ghostty-theme-sync-tmux/ghostty-theme-sync.tmux

# 3. Load components (structure/layout that uses theme variables)
source ~/.config/tmux/components/minimalist.tmux.conf

run '~/.config/tmux/plugins/tpm/tpm'
